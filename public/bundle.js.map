{
  "version": 3,
  "sources": ["ts/image-paste.ts", "ts/ui-utils.ts", "ts/model-selector.ts", "ts/session-panel.ts", "ts/history.ts", "ts/activity.ts", "ts/display-output.ts", "ts/streaming.ts", "ts/main.ts"],
  "sourcesContent": ["/**\n * Image paste handling\n */\n\n/**\n * Set up paste handler for image attachments\n */\nexport function setupImagePaste(): void {\n  document.addEventListener('paste', (e: ClipboardEvent) => {\n    const items = e.clipboardData?.items;\n    if (!items) return;\n\n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      if (item.type.indexOf('image') !== -1) {\n        e.preventDefault();\n        const blob = item.getAsFile();\n        if (!blob) continue;\n        \n        const reader = new FileReader();\n        \n        reader.onload = (event) => {\n          const base64 = event.target?.result as string;\n          const imageData = document.getElementById('imageData') as HTMLInputElement;\n          const previewImg = document.getElementById('previewImg') as HTMLImageElement;\n          const imagePreview = document.getElementById('imagePreview');\n          \n          if (imageData) imageData.value = base64;\n          if (previewImg) previewImg.src = base64;\n          if (imagePreview) imagePreview.classList.add('visible');\n        };\n        \n        reader.onerror = (error) => console.error('FileReader error:', error);\n        reader.readAsDataURL(blob);\n        break;\n      }\n    }\n  });\n}\n\n/**\n * Remove attached image\n */\nexport function removeImage(): void {\n  const imageData = document.getElementById('imageData') as HTMLInputElement;\n  const previewImg = document.getElementById('previewImg') as HTMLImageElement;\n  const imagePreview = document.getElementById('imagePreview');\n  \n  if (imageData) imageData.value = '';\n  if (previewImg) previewImg.src = '';\n  if (imagePreview) imagePreview.classList.remove('visible');\n}\n", "/**\n * UI utility functions\n */\n\n/**\n * Scroll chat to bottom\n */\nexport function scrollToBottom(): void {\n  const main = document.querySelector('main');\n  if (main) {\n    main.scrollTop = main.scrollHeight;\n  }\n}\n\n/**\n * HTML escape helper\n */\nexport function escapeHtml(text: string): string {\n  const map: Record<string, string> = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#039;'\n  };\n  return text.replace(/[&<>\"']/g, m => map[m]);\n}\n\n/**\n * Format relative time\n */\nexport function formatAge(dateStr: string | undefined): string {\n  if (!dateStr) return '';\n  \n  const now = Date.now();\n  const then = new Date(dateStr).getTime();\n  const diffMs = now - then;\n  \n  const minutes = Math.floor(diffMs / 60000);\n  const hours = Math.floor(diffMs / 3600000);\n  const days = Math.floor(diffMs / 86400000);\n  const weeks = Math.floor(days / 7);\n  const months = Math.floor(days / 30);\n  const years = Math.floor(days / 365);\n  \n  if (years >= 1) return `${years} year${years > 1 ? 's' : ''}`;\n  if (months >= 1) return `${months} month${months > 1 ? 's' : ''}`;\n  if (weeks >= 1) return `${weeks} week${weeks > 1 ? 's' : ''}`;\n  if (days >= 1) return `${days} day${days > 1 ? 's' : ''}`;\n  if (hours >= 1) return `${hours} hour${hours > 1 ? 's' : ''}`;\n  if (minutes >= 1) return `${minutes} min`;\n  return 'just now';\n}\n", "/**\n * Model selection\n */\n\nimport type { ModelInfo, Preferences } from './types.js';\n\n/**\n * Curated model list with display names and costs\n */\nexport const CURATED_MODELS: ModelInfo[] = [\n  { id: 'claude-sonnet-4', name: 'Claude Sonnet 4', cost: 1 },\n  { id: 'claude-sonnet-4.5', name: 'Claude Sonnet 4.5', cost: 1 },\n  { id: 'claude-opus-4.5', name: 'Claude Opus 4.5', cost: 3 },\n  { id: 'claude-haiku-4.5', name: 'Claude Haiku 4.5', cost: 0.33 },\n  { id: 'gpt-4.1', name: 'GPT-4.1', cost: 0 },\n  { id: 'gpt-4o', name: 'GPT-4o', cost: 0 },\n  { id: 'gpt-5-mini', name: 'GPT-5 mini', cost: 0 },\n  { id: 'gemini-2.5-pro', name: 'Gemini 2.5 Pro', cost: 1 },\n  { id: 'gemini-3-flash-preview', name: 'Gemini 3 Flash', cost: 0.33 }\n];\n\n/** Current selected model */\nexport let selectedModel = 'claude-sonnet-4';\n\n/**\n * Set the selected model\n */\nexport function setSelectedModel(modelId: string): void {\n  selectedModel = modelId;\n}\n\n/**\n * Toggle model dropdown visibility\n */\nexport function toggleModelDropdown(): void {\n  const dropdown = document.getElementById('modelDropdown');\n  const modelBtn = document.querySelector('.hamburger-btn.model-btn');\n  \n  if (!dropdown) return;\n  \n  const isOpen = dropdown.classList.contains('visible');\n  \n  if (isOpen) {\n    dropdown.classList.remove('visible');\n    modelBtn?.classList.remove('active');\n  } else {\n    dropdown.classList.add('visible');\n    modelBtn?.classList.add('active');\n    // Load models when opening\n    loadModels();\n  }\n}\n\n/**\n * Set up click-outside handler to close dropdown\n */\nexport function setupModelDropdownClose(): void {\n  document.addEventListener('click', (e) => {\n    const dropdown = document.getElementById('modelDropdown');\n    const modelBtn = document.querySelector('.hamburger-btn.model-btn');\n    if (dropdown && modelBtn && \n        !dropdown.contains(e.target as Node) && \n        !modelBtn.contains(e.target as Node)) {\n      dropdown.classList.remove('visible');\n      modelBtn.classList.remove('active');\n    }\n  });\n}\n\n/**\n * Load and render model list\n */\nexport function loadModels(): void {\n  const container = document.getElementById('modelList');\n  if (!container) return;\n  \n  container.innerHTML = '';\n  \n  for (const model of CURATED_MODELS) {\n    const item = document.createElement('div');\n    item.className = 'model-item';\n    if (model.id === selectedModel) {\n      item.classList.add('active');\n    }\n    item.dataset.modelId = model.id;\n    item.onclick = () => selectModel(model.id);\n    \n    // Model name\n    const nameSpan = document.createElement('span');\n    nameSpan.className = 'model-name';\n    nameSpan.textContent = model.name;\n    item.appendChild(nameSpan);\n    \n    // Cost indicator\n    const costSpan = document.createElement('span');\n    costSpan.className = 'model-cost';\n    if (model.cost === 0) {\n      costSpan.textContent = 'free';\n      costSpan.classList.add('free');\n    } else if (model.cost < 1) {\n      costSpan.textContent = `${model.cost}x`;\n      costSpan.classList.add('cheap');\n    } else if (model.cost > 1) {\n      costSpan.textContent = `${model.cost}x`;\n      costSpan.classList.add('expensive');\n    } else {\n      costSpan.textContent = '1x';\n    }\n    item.appendChild(costSpan);\n    \n    container.appendChild(item);\n  }\n}\n\n/**\n * Select a model\n */\nexport function selectModel(modelId: string): void {\n  selectedModel = modelId;\n  \n  const selectedModelInput = document.getElementById('selectedModel') as HTMLInputElement;\n  if (selectedModelInput) {\n    selectedModelInput.value = modelId;\n  }\n  \n  // Update placeholder to show selected model\n  const modelInfo = CURATED_MODELS.find(m => m.id === modelId);\n  const input = document.querySelector('input[name=\"message\"]') as HTMLInputElement;\n  if (input && modelInfo) {\n    input.placeholder = `Ask ${modelInfo.name}...`;\n  }\n  \n  // Save preference to server\n  fetch('/api/preferences', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ lastModel: modelId })\n  }).catch(() => {}); // Ignore errors\n  \n  // Close dropdown\n  toggleModelDropdown();\n}\n\n/**\n * Apply model from preferences\n */\nexport function applyModelPreference(prefs: Preferences): void {\n  if (prefs.lastModel && CURATED_MODELS.find(m => m.id === prefs.lastModel)) {\n    selectedModel = prefs.lastModel;\n    \n    const selectedModelInput = document.getElementById('selectedModel') as HTMLInputElement;\n    if (selectedModelInput) {\n      selectedModelInput.value = selectedModel;\n    }\n    \n    // Update placeholder\n    const modelInfo = CURATED_MODELS.find(m => m.id === selectedModel);\n    const input = document.querySelector('input[name=\"message\"]') as HTMLInputElement;\n    if (input && modelInfo) {\n      input.placeholder = `Ask ${modelInfo.name}...`;\n    }\n  }\n}\n", "/**\n * Session panel management\n */\n\nimport type { SessionsResponse, SessionData } from './types.js';\nimport { formatAge, scrollToBottom } from './ui-utils.js';\n\n/** Store current cwd and session for new chat form and session switching */\nexport let currentServerCwd = '';\nexport let currentActiveSessionId: string | null = null;\n\nexport function setCurrentServerCwd(cwd: string): void {\n  currentServerCwd = cwd;\n}\n\n/**\n * Toggle session panel visibility\n */\nexport function toggleSessionPanel(): void {\n  const chat = document.getElementById('chat');\n  const panel = document.getElementById('sessionPanel');\n  const modelPanel = document.getElementById('modelPanel');\n  const btn = document.querySelector('.hamburger-btn:not(.model-btn)');\n  const modelBtn = document.querySelector('.hamburger-btn.model-btn');\n  \n  if (!panel || !chat) return;\n  \n  const isOpen = panel.classList.contains('visible');\n  \n  if (isOpen) {\n    // Close panel, show chat\n    panel.classList.remove('visible');\n    chat.classList.remove('hidden');\n    btn?.classList.remove('active');\n  } else {\n    // Close model panel if open\n    modelPanel?.classList.remove('visible');\n    modelBtn?.classList.remove('active');\n    // Open panel, hide chat\n    panel.classList.add('visible');\n    chat.classList.add('hidden');\n    btn?.classList.add('active');\n    // Load sessions when opening\n    loadSessions();\n  }\n}\n\n/**\n * Load and render sessions\n */\nexport async function loadSessions(): Promise<void> {\n  try {\n    const response = await fetch('/api/sessions');\n    if (!response.ok) return;\n    \n    const data: SessionsResponse = await response.json();\n    const { activeSessionId, currentCwd, grouped } = data;\n    \n    // Store for use in switchSession and new chat form\n    currentServerCwd = currentCwd;\n    currentActiveSessionId = activeSessionId;\n    \n    const container = document.getElementById('sessionList');\n    if (!container) return;\n    \n    container.innerHTML = '';\n    \n    // Sort cwds: current first, then alphabetically\n    const cwds = Object.keys(grouped).sort((a, b) => {\n      if (a === currentCwd) return -1;\n      if (b === currentCwd) return 1;\n      return a.localeCompare(b);\n    });\n    \n    for (const cwd of cwds) {\n      const sessions = grouped[cwd];\n      \n      // Handle unknown cwd sessions - just show a summary\n      if (cwd === '(unknown)' || !cwd) {\n        const summary = document.createElement('div');\n        summary.className = 'cwd-header omitted';\n        summary.textContent = `no cwd (${sessions.length} omitted)`;\n        container.appendChild(summary);\n        continue;\n      }\n      \n      // CWD header\n      const cwdHeader = document.createElement('div');\n      cwdHeader.className = 'cwd-header';\n      cwdHeader.textContent = cwd === currentCwd ? `${cwd} (current)` : cwd;\n      container.appendChild(cwdHeader);\n      \n      // Session items\n      for (const session of sessions) {\n        const item = createSessionItem(session, activeSessionId);\n        container.appendChild(item);\n      }\n    }\n  } catch (error) {\n    console.error('Failed to load sessions:', error);\n  }\n}\n\n/**\n * Create a session item element\n */\nfunction createSessionItem(session: SessionData, activeSessionId: string): HTMLElement {\n  const item = document.createElement('div');\n  item.className = 'session-item';\n  if (session.sessionId === activeSessionId) {\n    item.classList.add('active');\n  }\n  item.dataset.sessionId = session.sessionId;\n  \n  // Summary text (truncated)\n  const summarySpan = document.createElement('span');\n  summarySpan.className = 'session-summary';\n  const summary = session.summary || 'No summary';\n  const age = session.updatedAt ? ` (${formatAge(session.updatedAt)})` : '';\n  summarySpan.textContent = summary + age;\n  summarySpan.onclick = () => switchSession(session.sessionId);\n  item.appendChild(summarySpan);\n  \n  // Delete button\n  const deleteBtn = document.createElement('button');\n  deleteBtn.className = 'session-delete';\n  deleteBtn.textContent = '\u00D7';\n  deleteBtn.onclick = (e) => {\n    e.stopPropagation();\n    deleteSession(session.sessionId, session.summary);\n  };\n  item.appendChild(deleteBtn);\n  \n  return item;\n}\n\n/**\n * Switch to a different session\n */\nexport async function switchSession(sessionId: string): Promise<void> {\n  // If already on this session, just close the panel and scroll to bottom\n  if (sessionId === currentActiveSessionId) {\n    toggleSessionPanel();\n    scrollToBottom();\n    return;\n  }\n  \n  // Show loading state on clicked item\n  const clickedItem = document.querySelector(`.session-item[data-session-id=\"${sessionId}\"]`);\n  if (clickedItem) {\n    clickedItem.classList.add('loading');\n  }\n  \n  try {\n    const response = await fetch(`/api/sessions/${sessionId}/resume`, {\n      method: 'POST'\n    });\n    \n    if (response.ok) {\n      // Reload the page to get new session's history\n      window.location.reload();\n    } else {\n      const err = await response.json();\n      if (clickedItem) clickedItem.classList.remove('loading');\n      alert('Failed to switch session: ' + err.error);\n    }\n  } catch (error) {\n    console.error('Failed to switch session:', error);\n    if (clickedItem) clickedItem.classList.remove('loading');\n  }\n}\n\n/**\n * Delete a session\n */\nexport async function deleteSession(sessionId: string, summary?: string): Promise<void> {\n  const displayName = summary || sessionId.slice(0, 8);\n  if (!confirm(`Delete session \"${displayName}\"?\\n\\nThis cannot be undone.`)) {\n    return;\n  }\n  \n  try {\n    const response = await fetch(`/api/sessions/${sessionId}`, {\n      method: 'DELETE'\n    });\n    \n    if (response.ok) {\n      const data = await response.json();\n      \n      // If we deleted the active session, clear the chat\n      if (data.wasActive) {\n        const chat = document.getElementById('chat');\n        if (chat) chat.innerHTML = '';\n      }\n      \n      // Refresh session list\n      loadSessions();\n    } else {\n      const err = await response.json();\n      alert('Failed to delete session: ' + err.error);\n    }\n  } catch (error) {\n    console.error('Failed to delete session:', error);\n    alert('Failed to delete session: ' + (error as Error).message);\n  }\n}\n\n/**\n * Toggle new chat form expansion\n */\nexport function toggleNewChatForm(): void {\n  const form = document.getElementById('newChatForm');\n  const pathInput = document.getElementById('newChatPath') as HTMLInputElement;\n  const errorDiv = document.getElementById('newChatError');\n  \n  if (!form || !pathInput) return;\n  \n  if (form.classList.contains('expanded')) {\n    // Collapse\n    form.classList.remove('expanded');\n    if (errorDiv) {\n      errorDiv.classList.remove('visible');\n      errorDiv.textContent = '';\n    }\n  } else {\n    // Expand and pre-fill with current cwd\n    form.classList.add('expanded');\n    pathInput.value = currentServerCwd;\n    pathInput.focus();\n    pathInput.select();\n  }\n}\n\n/**\n * Create a new session with specified cwd\n */\nexport async function createNewSession(): Promise<void> {\n  const pathInput = document.getElementById('newChatPath') as HTMLInputElement;\n  const errorDiv = document.getElementById('newChatError');\n  const cwd = pathInput?.value.trim();\n  \n  if (!cwd) {\n    if (errorDiv) {\n      errorDiv.textContent = 'Please enter a working directory path';\n      errorDiv.classList.add('visible');\n    }\n    return;\n  }\n  \n  try {\n    const response = await fetch('/api/sessions/new', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ cwd })\n    });\n    \n    if (response.ok) {\n      // Reload the page to start fresh session\n      window.location.reload();\n    } else {\n      const err = await response.json();\n      if (errorDiv) {\n        errorDiv.textContent = err.error || 'Failed to create session';\n        errorDiv.classList.add('visible');\n      }\n    }\n  } catch (error) {\n    console.error('Failed to create session:', error);\n    if (errorDiv) {\n      errorDiv.textContent = 'Failed to create session: ' + (error as Error).message;\n      errorDiv.classList.add('visible');\n    }\n  }\n}\n", "/**\n * History and preferences loading\n */\n\nimport type { Preferences } from './types.js';\nimport { scrollToBottom } from './ui-utils.js';\nimport { applyModelPreference } from './model-selector.js';\nimport { setCurrentServerCwd } from './session-panel.js';\n\n// Declare renderMarkdown as a global function from markdown-renderer.js\ndeclare global {\n  interface Window {\n    renderMarkdown?: () => void;\n  }\n}\n\n/**\n * Load conversation history on page load\n */\nexport async function loadHistory(): Promise<void> {\n  try {\n    const response = await fetch('/api/history');\n    if (response.ok) {\n      const html = await response.text();\n      const chat = document.getElementById('chat');\n      if (chat && html.trim()) {\n        chat.innerHTML = html;\n        // Render any markdown in loaded messages\n        if (typeof window.renderMarkdown === 'function') {\n          window.renderMarkdown();\n        }\n      }\n      // Always scroll to bottom after loading history\n      scrollToBottom();\n    }\n  } catch (error) {\n    console.error('Failed to load history:', error);\n  }\n}\n\n/**\n * Load and apply user preferences\n */\nexport async function loadPreferences(): Promise<void> {\n  try {\n    const response = await fetch('/api/preferences');\n    if (response.ok) {\n      const prefs: Preferences = await response.json();\n      \n      // Apply saved model selection\n      applyModelPreference(prefs);\n      \n      // Store last cwd for new chat form\n      if (prefs.lastCwd) {\n        setCurrentServerCwd(prefs.lastCwd);\n      }\n    }\n  } catch (error) {\n    console.error('Failed to load preferences:', error);\n  }\n}\n", "/**\n * Activity box management\n */\n\nimport type { ToolEventData } from './types.js';\n\n/**\n * Add activity item to activity box\n */\nexport function addActivityItem(type: string, text: string, details: string | null = null): void {\n  const activityBox = document.querySelector('#pending-response .activity-box');\n  if (!activityBox) return;\n  \n  const item = document.createElement('div');\n  item.className = `activity-item ${type}`;\n  \n  if (details) {\n    // Create expandable item with details\n    const summary = document.createElement('div');\n    summary.className = 'activity-summary';\n    summary.textContent = text;\n    summary.onclick = () => item.classList.toggle('expanded');\n    item.appendChild(summary);\n    \n    const detailsDiv = document.createElement('div');\n    detailsDiv.className = 'activity-details';\n    detailsDiv.textContent = details;\n    item.appendChild(detailsDiv);\n  } else {\n    item.textContent = text;\n  }\n  \n  activityBox.appendChild(item);\n  \n  // Update activity count in header\n  const wrapper = activityBox.closest('.activity-wrapper');\n  if (wrapper) {\n    const count = activityBox.querySelectorAll('.activity-item').length;\n    const countSpan = wrapper.querySelector('.activity-count');\n    if (countSpan) countSpan.textContent = `(${count})`;\n  }\n  \n  // Auto-scroll activity box\n  activityBox.scrollTop = activityBox.scrollHeight;\n}\n\n/**\n * Toggle activity box expand/collapse\n */\nexport function toggleActivityBox(header: HTMLElement): void {\n  const wrapper = header.closest('.activity-wrapper');\n  if (!wrapper) return;\n  \n  const isCollapsed = wrapper.classList.contains('collapsed');\n  wrapper.classList.toggle('collapsed');\n  \n  // Update icon\n  const icon = header.querySelector('.activity-icon');\n  if (icon) {\n    icon.textContent = isCollapsed ? '\u25BC' : '\u25B6';\n  }\n}\n\n/**\n * Format tool arguments for display\n */\nexport function formatToolArgs(args: Record<string, unknown> | undefined): string {\n  if (!args) return '';\n  \n  const parts: string[] = [];\n  for (const [key, value] of Object.entries(args)) {\n    if (typeof value === 'string') {\n      // Truncate long strings\n      const display = value.length > 80 ? value.substring(0, 80) + '...' : value;\n      parts.push(`${key}: ${display}`);\n    } else if (typeof value === 'object') {\n      parts.push(`${key}: ${JSON.stringify(value).substring(0, 60)}...`);\n    } else {\n      parts.push(`${key}: ${value}`);\n    }\n  }\n  return parts.join(', ');\n}\n\n/**\n * Format tool result for display\n */\nexport function formatToolResult(result: ToolEventData['result']): string {\n  if (!result) return '';\n  \n  if (result.content) {\n    const content = typeof result.content === 'string' \n      ? result.content \n      : JSON.stringify(result.content);\n    return content.length > 500 ? content.substring(0, 500) + '...' : content;\n  }\n  \n  return JSON.stringify(result).substring(0, 200);\n}\n", "/**\n * Display output rendering for display-only tools\n */\n\nimport type { DisplayOutput, OutputData } from './types.js';\n\n// Declare globals from external scripts\ndeclare global {\n  interface Window {\n    marked?: { parse: (md: string) => string };\n    DOMPurify?: { sanitize: (html: string) => string };\n    hljs?: { highlightElement: (el: Element) => void };\n  }\n}\n\n/**\n * Render display output from display-only tools\n */\nexport async function renderDisplayOutput(output: DisplayOutput): Promise<void> {\n  if (!output || !output.id) return;\n  \n  const container = document.querySelector('#pending-response .outputs-container');\n  if (!container) return;\n  \n  try {\n    const response = await fetch(`/api/outputs/${output.id}?format=json`);\n    if (!response.ok) return;\n    \n    const { data, metadata }: OutputData = await response.json();\n    let markdown = '';\n    \n    if (output.type === 'file') {\n      const lang = metadata.highlight || '';\n      const pathInfo = metadata.path ? `**${metadata.path}**` : '';\n      const lineInfo = metadata.startLine && metadata.endLine \n        ? ` (lines ${metadata.startLine}-${metadata.endLine} of ${metadata.totalLines})`\n        : '';\n      markdown = `${pathInfo}${lineInfo}\\n\\n\\`\\`\\`${lang}\\n${data}\\n\\`\\`\\``;\n      \n    } else if (output.type === 'terminal') {\n      const exitInfo = metadata.exitCode === 0 ? '' : ` (exit ${metadata.exitCode})`;\n      markdown = `\\`\\`\\`bash\\n$ ${metadata.command}${exitInfo}\\n${data}\\n\\`\\`\\``;\n      \n    } else if (output.type === 'image') {\n      const img = document.createElement('img');\n      img.className = 'output-image';\n      img.src = metadata.mimeType && typeof data === 'string'\n        ? `data:${metadata.mimeType};base64,${data}`\n        : `/api/outputs/${output.id}`;\n      img.alt = metadata.path || 'Image';\n      container.appendChild(img);\n      return;\n    }\n    \n    if (markdown && window.marked && window.DOMPurify) {\n      const div = document.createElement('div');\n      div.className = 'output-content';\n      div.innerHTML = window.DOMPurify.sanitize(window.marked.parse(markdown));\n      container.appendChild(div);\n      \n      // Apply syntax highlighting\n      div.querySelectorAll('pre code').forEach((block) => {\n        if (window.hljs) window.hljs.highlightElement(block);\n      });\n    }\n  } catch (err) {\n    console.error('Error displaying output:', err);\n  }\n}\n", "/**\n * SSE Streaming implementation\n */\n\nimport type { ToolEventData, MessageEventData } from './types.js';\nimport { escapeHtml, scrollToBottom } from './ui-utils.js';\nimport { addActivityItem, formatToolArgs, formatToolResult, toggleActivityBox } from './activity.js';\nimport { renderDisplayOutput } from './display-output.js';\nimport { removeImage } from './image-paste.js';\n\n// Declare renderMarkdown global\ndeclare global {\n  interface Window {\n    renderMarkdown?: () => void;\n  }\n}\n\n/** Track active EventSource for stop functionality */\nlet activeEventSource: EventSource | null = null;\nlet stopButtonTimeout: ReturnType<typeof setTimeout> | null = null;\n\n/**\n * Add user message bubble immediately\n */\nexport function addUserBubble(message: string, hasImage: boolean): HTMLElement {\n  const chat = document.getElementById('chat');\n  if (!chat) throw new Error('Chat element not found');\n  \n  // Add user message\n  const userDiv = document.createElement('div');\n  userDiv.className = 'message user';\n  userDiv.innerHTML = `${escapeHtml(message)}${hasImage ? ' <span class=\"image-indicator\">[img]</span>' : ''}`;\n  chat.appendChild(userDiv);\n  \n  // Add pending response with activity box\n  const assistantDiv = document.createElement('div');\n  assistantDiv.className = 'message assistant pending';\n  assistantDiv.id = 'pending-response';\n  assistantDiv.setAttribute('data-markdown', '');\n  assistantDiv.innerHTML = `\n    <div class=\"activity-wrapper\">\n      <div class=\"activity-header\" onclick=\"toggleActivityBox(this)\">\n        <span class=\"activity-icon\">\u25B6</span>\n        <span class=\"activity-label\">Activity</span>\n        <span class=\"activity-count\"></span>\n      </div>\n      <div class=\"activity-box\"></div>\n    </div>\n    <div class=\"outputs-container\"></div>\n    <div class=\"markdown-content streaming-cursor\"></div>\n  `;\n  chat.appendChild(assistantDiv);\n  \n  // Scroll to bottom\n  scrollToBottom();\n  \n  return assistantDiv;\n}\n\n/**\n * Stream response via EventSource\n */\nexport function streamResponse(prompt: string, model: string, imageData: string): void {\n  // Build URL with parameters\n  const params = new URLSearchParams({ prompt, model });\n  if (imageData) {\n    params.set('imageData', imageData);\n  }\n  \n  const eventSource = new EventSource(`/api/stream?${params.toString()}`);\n  activeEventSource = eventSource;\n  \n  const responseDiv = document.querySelector('#pending-response .markdown-content');\n  let responseContent = '';\n  let firstDeltaReceived = false;\n  \n  // Handle response text deltas\n  eventSource.addEventListener('assistant.message_delta', (e: MessageEvent) => {\n    const data: MessageEventData = JSON.parse(e.data);\n    if (data.deltaContent) {\n      responseContent += data.deltaContent;\n      if (responseDiv) responseDiv.textContent = responseContent;\n      \n      // Collapse activity wrapper on first delta\n      if (!firstDeltaReceived) {\n        const wrapper = document.querySelector('#pending-response .activity-wrapper');\n        if (wrapper) {\n          wrapper.classList.add('collapsed');\n          const icon = wrapper.querySelector('.activity-icon');\n          if (icon) icon.textContent = '\u25B6';\n        }\n        firstDeltaReceived = true;\n      }\n      \n      scrollToBottom();\n    }\n  });\n  \n  // Handle final message\n  eventSource.addEventListener('assistant.message', (e: MessageEvent) => {\n    const data: MessageEventData = JSON.parse(e.data);\n    if (data.content && responseDiv) {\n      // Set final content as text (renderMarkdown will parse it)\n      responseDiv.textContent = data.content;\n      responseDiv.classList.remove('streaming-cursor');\n      \n      // Mark as not processed so renderMarkdown will handle it\n      const pending = document.getElementById('pending-response');\n      if (pending) {\n        pending.dataset.markdownProcessed = 'false';\n      }\n      \n      // Render markdown (with DOMPurify sanitization)\n      if (typeof window.renderMarkdown === 'function') {\n        window.renderMarkdown();\n      }\n    }\n  });\n  \n  // Handle turn start\n  eventSource.addEventListener('assistant.turn_start', (e: MessageEvent) => {\n    const data = JSON.parse(e.data);\n    addActivityItem('turn', `Turn ${parseInt(data.turnId || 0) + 1}...`);\n  });\n  \n  // Handle intent\n  eventSource.addEventListener('assistant.intent', (e: MessageEvent) => {\n    const data = JSON.parse(e.data);\n    if (data.intent) {\n      addActivityItem('intent', `Intent: ${data.intent}`);\n    }\n  });\n  \n  // Handle tool execution\n  eventSource.addEventListener('tool.execution_start', (e: MessageEvent) => {\n    const data: ToolEventData = JSON.parse(e.data);\n    const toolName = data.toolName || data.name || 'tool';\n    const args = formatToolArgs(data.arguments);\n    const summary = `\u25B6 ${toolName}`;\n    const details = args ? `Arguments: ${args}` : null;\n    addActivityItem('tool', summary, details);\n  });\n  \n  eventSource.addEventListener('tool.execution_complete', (e: MessageEvent) => {\n    const data: ToolEventData = JSON.parse(e.data);\n    const toolName = data.toolName || data.name || 'tool';\n    const status = data.success ? '\u2713' : '\u2717';\n    const summary = `${status} ${toolName}`;\n    const details = data.result ? formatToolResult(data.result) : null;\n    addActivityItem('tool-result', summary, details);\n    \n    // Display output if present (from display-only tools)\n    if (data._output) {\n      renderDisplayOutput(data._output);\n    }\n  });\n  \n  // Handle errors\n  eventSource.addEventListener('session.error', (e: MessageEvent) => {\n    const data = JSON.parse(e.data);\n    addActivityItem('error', `Error: ${data.message || 'Unknown error'}`);\n  });\n  \n  eventSource.addEventListener('error', (e: MessageEvent) => {\n    const data = JSON.parse(e.data || '{}');\n    addActivityItem('error', `Error: ${data.message || 'Connection error'}`);\n  });\n  \n  // Handle completion\n  eventSource.addEventListener('done', () => {\n    eventSource.close();\n    activeEventSource = null;\n    finishPendingResponse();\n  });\n  \n  eventSource.addEventListener('session.idle', () => {\n    // Will also receive 'done', but handle just in case\n  });\n  \n  // Handle connection errors\n  eventSource.onerror = (err) => {\n    console.error('EventSource error:', err);\n    eventSource.close();\n    activeEventSource = null;\n    \n    // If we haven't received any content, show error\n    if (!responseContent && !firstDeltaReceived) {\n      addActivityItem('error', 'Connection lost');\n    }\n    \n    finishPendingResponse();\n  };\n}\n\n/**\n * Stop streaming response\n */\nexport function stopStreaming(): void {\n  if (activeEventSource) {\n    activeEventSource.close();\n    activeEventSource = null;\n    \n    // Add visual feedback\n    addActivityItem('info', 'Stopped by user');\n    \n    // Mark response as stopped\n    const responseDiv = document.querySelector('#pending-response .markdown-content');\n    if (responseDiv) {\n      responseDiv.classList.remove('streaming-cursor');\n    }\n    \n    finishPendingResponse();\n  }\n}\n\n/**\n * Clean up pending response\n */\nfunction finishPendingResponse(): void {\n  const pending = document.getElementById('pending-response');\n  if (pending) {\n    pending.classList.remove('pending');\n    pending.removeAttribute('id');\n    \n    // Remove streaming cursor\n    const content = pending.querySelector('.markdown-content');\n    if (content) {\n      content.classList.remove('streaming-cursor');\n    }\n    \n    // Collapse activity wrapper when done (user can re-expand)\n    const wrapper = pending.querySelector('.activity-wrapper');\n    if (wrapper) {\n      wrapper.classList.add('collapsed');\n      const icon = wrapper.querySelector('.activity-icon');\n      if (icon) icon.textContent = '\u25B6';\n    }\n  }\n  \n  // Re-enable form\n  setFormEnabled(true);\n}\n\n/**\n * Enable/disable form during streaming\n */\nexport function setFormEnabled(enabled: boolean): void {\n  const form = document.getElementById('chatForm') as HTMLFormElement;\n  const input = form?.querySelector('input[name=\"message\"]') as HTMLInputElement;\n  const submitBtn = form?.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n  \n  if (!form || !input || !submitBtn) return;\n  \n  // Clear any pending stop button timeout\n  if (stopButtonTimeout) {\n    clearTimeout(stopButtonTimeout);\n    stopButtonTimeout = null;\n  }\n  \n  input.disabled = !enabled;\n  \n  if (enabled) {\n    // Restore to Send button\n    submitBtn.disabled = false;\n    submitBtn.textContent = 'Send';\n    submitBtn.classList.remove('stop-btn');\n    submitBtn.onclick = null;\n    input.focus();\n  } else {\n    // Briefly disable to prevent double-tap, then show Stop\n    submitBtn.disabled = true;\n    submitBtn.textContent = 'Send';\n    submitBtn.classList.remove('stop-btn');\n    \n    stopButtonTimeout = setTimeout(() => {\n      // Only show stop if still streaming\n      if (activeEventSource) {\n        submitBtn.disabled = false;\n        submitBtn.textContent = 'Stop';\n        submitBtn.classList.add('stop-btn');\n        submitBtn.onclick = (e) => {\n          e.preventDefault();\n          stopStreaming();\n        };\n      }\n    }, 400);\n  }\n}\n\n/**\n * Set up form submission handler\n */\nexport function setupFormHandler(): void {\n  const form = document.getElementById('chatForm') as HTMLFormElement;\n  if (!form) return;\n  \n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n    \n    const input = form.querySelector('input[name=\"message\"]') as HTMLInputElement;\n    const message = input.value.trim();\n    const model = (document.getElementById('selectedModel') as HTMLInputElement).value;\n    const imageData = (document.getElementById('imageData') as HTMLInputElement).value;\n    \n    if (!message) return;\n    \n    // Disable form during streaming\n    setFormEnabled(false);\n    \n    // Add user bubble immediately\n    const hasImage = !!imageData;\n    addUserBubble(message, hasImage);\n    \n    // Clear input and image\n    input.value = '';\n    removeImage();\n    \n    // Start streaming\n    streamResponse(message, model, imageData);\n  });\n}\n", "/**\n * Main entry point - ties all modules together\n */\n\nimport { setupImagePaste, removeImage } from './image-paste.js';\nimport { scrollToBottom } from './ui-utils.js';\nimport { loadHistory, loadPreferences } from './history.js';\nimport { toggleSessionPanel, toggleNewChatForm, createNewSession, switchSession, deleteSession } from './session-panel.js';\nimport { toggleModelDropdown, selectModel, loadModels, setupModelDropdownClose } from './model-selector.js';\nimport { toggleActivityBox } from './activity.js';\nimport { setupFormHandler, stopStreaming } from './streaming.js';\n\n// Export functions to global scope for onclick handlers in HTML\ndeclare global {\n  interface Window {\n    removeImage: typeof removeImage;\n    scrollToBottom: typeof scrollToBottom;\n    toggleSessionPanel: typeof toggleSessionPanel;\n    toggleNewChatForm: typeof toggleNewChatForm;\n    createNewSession: typeof createNewSession;\n    switchSession: typeof switchSession;\n    deleteSession: typeof deleteSession;\n    toggleModelDropdown: typeof toggleModelDropdown;\n    selectModel: typeof selectModel;\n    loadModels: typeof loadModels;\n    toggleActivityBox: typeof toggleActivityBox;\n    stopStreaming: typeof stopStreaming;\n  }\n}\n\n// Attach to window for HTML onclick handlers\nwindow.removeImage = removeImage;\nwindow.scrollToBottom = scrollToBottom;\nwindow.toggleSessionPanel = toggleSessionPanel;\nwindow.toggleNewChatForm = toggleNewChatForm;\nwindow.createNewSession = createNewSession;\nwindow.switchSession = switchSession;\nwindow.deleteSession = deleteSession;\nwindow.toggleModelDropdown = toggleModelDropdown;\nwindow.selectModel = selectModel;\nwindow.loadModels = loadModels;\nwindow.toggleActivityBox = toggleActivityBox;\nwindow.stopStreaming = stopStreaming;\n\n// Scroll to bottom when new messages arrive (HTMX)\ndocument.body.addEventListener('htmx:afterSwap', () => {\n  scrollToBottom();\n});\n\n// Initialize on page load\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Set up event handlers\n  setupImagePaste();\n  setupFormHandler();\n  setupModelDropdownClose();\n  \n  // Load initial state\n  loadPreferences();\n  loadHistory();\n});\n"],
  "mappings": "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",
  "names": ["setupImagePaste", "items", "i", "item", "blob", "reader", "event", "base64", "imageData", "previewImg", "imagePreview", "error", "removeImage", "scrollToBottom", "main", "escapeHtml", "text", "map", "m", "formatAge", "dateStr", "now", "then", "diffMs", "minutes", "hours", "days", "weeks", "months", "years", "CURATED_MODELS", "selectedModel", "toggleModelDropdown", "dropdown", "modelBtn", "loadModels", "setupModelDropdownClose", "container", "model", "CURATED_MODELS", "item", "selectedModel", "selectModel", "nameSpan", "costSpan", "modelId", "selectedModelInput", "modelInfo", "m", "input", "applyModelPreference", "prefs", "currentServerCwd", "currentActiveSessionId", "setCurrentServerCwd", "cwd", "toggleSessionPanel", "chat", "panel", "modelPanel", "btn", "modelBtn", "loadSessions", "response", "data", "activeSessionId", "currentCwd", "grouped", "container", "cwds", "a", "b", "sessions", "summary", "cwdHeader", "session", "item", "createSessionItem", "error", "summarySpan", "age", "formatAge", "switchSession", "deleteBtn", "e", "deleteSession", "sessionId", "scrollToBottom", "clickedItem", "err", "displayName", "toggleNewChatForm", "form", "pathInput", "errorDiv", "createNewSession", "loadHistory", "response", "html", "chat", "scrollToBottom", "error", "loadPreferences", "prefs", "applyModelPreference", "setCurrentServerCwd", "addActivityItem", "type", "text", "details", "activityBox", "item", "summary", "detailsDiv", "wrapper", "count", "countSpan", "toggleActivityBox", "header", "isCollapsed", "icon", "formatToolArgs", "args", "parts", "key", "value", "display", "formatToolResult", "result", "content", "renderDisplayOutput", "output", "container", "response", "data", "metadata", "markdown", "lang", "pathInfo", "lineInfo", "exitInfo", "img", "div", "block", "err", "activeEventSource", "stopButtonTimeout", "addUserBubble", "message", "hasImage", "chat", "userDiv", "escapeHtml", "assistantDiv", "scrollToBottom", "streamResponse", "prompt", "model", "imageData", "params", "eventSource", "responseDiv", "responseContent", "firstDeltaReceived", "e", "data", "wrapper", "icon", "pending", "addActivityItem", "toolName", "args", "formatToolArgs", "summary", "details", "formatToolResult", "renderDisplayOutput", "finishPendingResponse", "err", "stopStreaming", "content", "setFormEnabled", "enabled", "form", "input", "submitBtn", "setupFormHandler", "removeImage", "removeImage", "scrollToBottom", "toggleSessionPanel", "toggleNewChatForm", "createNewSession", "switchSession", "deleteSession", "toggleModelDropdown", "selectModel", "loadModels", "toggleActivityBox", "stopStreaming", "setupImagePaste", "setupFormHandler", "setupModelDropdownClose", "loadPreferences", "loadHistory"]
}
